{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{doc,deleteDoc}from\"firebase/firestore\";import{firestore}from\"../firebase\";import useFetch from\"../useFetch\";import{Button}from\"react-bootstrap\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NoteDetails=function NoteDetails(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useFetch=useFetch(id),note=_useFetch.notes,error=_useFetch.error,isPending=_useFetch.isPending;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDeleting=_useState2[0],setIsDeleting=_useState2[1];var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var noteRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsDeleting(true);_context.prev=1;noteRef=doc(firestore,\"Notes\",id);_context.next=5;return deleteDoc(noteRef);case 5:console.log(\"Note deleted successfully\");navigate(\"/\");// Redirect to the home page or the desired route after deleting the note\n_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.error(\"Error deleting note:\",_context.t0);setIsDeleting(false);case 13:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function handleDelete(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"note-details\",children:[isPending&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading ... \"}),error&&/*#__PURE__*/_jsx(\"div\",{children:error}),note&&/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:note.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Author: \",note.author]}),/*#__PURE__*/_jsx(\"div\",{className:\"note_body\",children:note.body}),!isDeleting&&/*#__PURE__*/_jsx(Button,{onClick:handleDelete,children:\"Delete Note\"}),isDeleting&&/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Deleting Note...\"})]})]});};export default NoteDetails;","map":{"version":3,"names":["useState","useParams","useNavigate","doc","deleteDoc","firestore","useFetch","Button","jsx","_jsx","jsxs","_jsxs","NoteDetails","_useParams","id","navigate","_useFetch","note","notes","error","isPending","_useState","_useState2","_slicedToArray","isDeleting","setIsDeleting","handleDelete","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","noteRef","wrap","_callee$","_context","prev","next","console","log","t0","stop","apply","arguments","className","children","title","author","body","onClick","disabled"],"sources":["/Users/mc/Desktop/The_Odin_Project/react/notely/src/Components/NoteDetails.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { doc, deleteDoc } from \"firebase/firestore\";\nimport { firestore } from \"../firebase\";\nimport useFetch from \"../useFetch\";\nimport { Button } from \"react-bootstrap\";\n\nconst NoteDetails = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { notes: note, error, isPending } = useFetch(id);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const handleDelete = async () => {\n    setIsDeleting(true);\n\n    try {\n      const noteRef = doc(firestore, \"Notes\", id);\n      await deleteDoc(noteRef);\n\n      console.log(\"Note deleted successfully\");\n      navigate(\"/\"); // Redirect to the home page or the desired route after deleting the note\n    } catch (error) {\n      console.error(\"Error deleting note:\", error);\n      setIsDeleting(false);\n    }\n  };\n\n  return (\n    <div className=\"note-details\">\n      {isPending && <div>Loading ... </div>}\n      {error && <div>{error}</div>}\n      {note && (\n        <article>\n          <h2>{note.title}</h2>\n          <p>Author: {note.author}</p>\n          <div className=\"note_body\">{note.body}</div>\n\n          {/* Delete button */}\n          {!isDeleting && (\n            <Button onClick={handleDelete}>Delete Note</Button>\n          )}\n          {isDeleting && (\n            <Button disabled>Deleting Note...</Button>\n          )}\n        </article>\n      )}\n    </div>\n  );\n};\n\nexport default NoteDetails;\n"],"mappings":"+ZAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,GAAG,CAAEC,SAAS,KAAQ,oBAAoB,CACnD,OAASC,SAAS,KAAQ,aAAa,CACvC,MAAO,CAAAC,QAAQ,KAAM,aAAa,CAClC,OAASC,MAAM,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEzC,GAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxB,IAAAC,UAAA,CAAeZ,SAAS,EAAE,CAAlBa,EAAE,CAAAD,UAAA,CAAFC,EAAE,CACV,GAAM,CAAAC,QAAQ,CAAGb,WAAW,EAAE,CAC9B,IAAAc,SAAA,CAA0CV,QAAQ,CAACQ,EAAE,CAAC,CAAvCG,IAAI,CAAAD,SAAA,CAAXE,KAAK,CAAQC,KAAK,CAAAH,SAAA,CAALG,KAAK,CAAEC,SAAS,CAAAJ,SAAA,CAATI,SAAS,CACrC,IAAAC,SAAA,CAAoCrB,QAAQ,CAAC,KAAK,CAAC,CAAAsB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,UAAU,CAAAF,UAAA,IAAEG,aAAa,CAAAH,UAAA,IAEhC,GAAM,CAAAI,YAAY,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,OAAA,QAAAH,mBAAA,GAAAI,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SACnBZ,aAAa,CAAC,IAAI,CAAC,CAACU,QAAA,CAAAC,IAAA,GAGZJ,OAAO,CAAG7B,GAAG,CAACE,SAAS,CAAE,OAAO,CAAES,EAAE,CAAC,CAAAqB,QAAA,CAAAE,IAAA,SACrC,CAAAjC,SAAS,CAAC4B,OAAO,CAAC,QAExBM,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CACxCxB,QAAQ,CAAC,GAAG,CAAC,CAAE;AAAAoB,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAK,EAAA,CAAAL,QAAA,aAEfG,OAAO,CAACnB,KAAK,CAAC,sBAAsB,CAAAgB,QAAA,CAAAK,EAAA,CAAQ,CAC5Cf,aAAa,CAAC,KAAK,CAAC,CAAC,yBAAAU,QAAA,CAAAM,IAAA,MAAAV,OAAA,gBAExB,kBAbK,CAAAL,YAAYA,CAAA,SAAAC,IAAA,CAAAe,KAAA,MAAAC,SAAA,OAajB,CAED,mBACEhC,KAAA,QAAKiC,SAAS,CAAC,cAAc,CAAAC,QAAA,EAC1BzB,SAAS,eAAIX,IAAA,QAAAoC,QAAA,CAAK,cAAY,EAAM,CACpC1B,KAAK,eAAIV,IAAA,QAAAoC,QAAA,CAAM1B,KAAK,EAAO,CAC3BF,IAAI,eACHN,KAAA,YAAAkC,QAAA,eACEpC,IAAA,OAAAoC,QAAA,CAAK5B,IAAI,CAAC6B,KAAK,EAAM,cACrBnC,KAAA,MAAAkC,QAAA,EAAG,UAAQ,CAAC5B,IAAI,CAAC8B,MAAM,GAAK,cAC5BtC,IAAA,QAAKmC,SAAS,CAAC,WAAW,CAAAC,QAAA,CAAE5B,IAAI,CAAC+B,IAAI,EAAO,CAG3C,CAACxB,UAAU,eACVf,IAAA,CAACF,MAAM,EAAC0C,OAAO,CAAEvB,YAAa,CAAAmB,QAAA,CAAC,aAAW,EAC3C,CACArB,UAAU,eACTf,IAAA,CAACF,MAAM,EAAC2C,QAAQ,MAAAL,QAAA,CAAC,kBAAgB,EAClC,GAEJ,GACG,CAEV,CAAC,CAED,cAAe,CAAAjC,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}