{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{doc,deleteDoc}from\"firebase/firestore\";import{firestore}from\"../firebase\";import useFetch from\"../useFetch\";import{Button}from\"react-bootstrap\";import{auth}from\"../firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NoteDetails=function NoteDetails(){var _useParams=useParams(),id=_useParams.id;var navigate=useNavigate();var _useFetch=useFetch(id),note=_useFetch.notes,error=_useFetch.error,isPending=_useFetch.isPending;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDeleting=_useState2[0],setIsDeleting=_useState2[1];var handleDelete=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var user,userId,collectionName,noteRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setIsDeleting(true);_context.prev=1;user=auth.currentUser;userId=user.uid;collectionName=\"UserNotes_\".concat(userId);noteRef=doc(firestore,collectionName,id);_context.next=8;return deleteDoc(noteRef);case 8:console.log(\"Note deleted successfully\");navigate(\"/\");// Redirect to the home page or the desired route after deleting the note\n_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error(\"Error deleting note:\",_context.t0);setIsDeleting(false);case 16:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));return function handleDelete(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"note-details\",children:[isPending&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading ... \"}),error&&/*#__PURE__*/_jsx(\"div\",{children:error}),note&&/*#__PURE__*/_jsxs(\"article\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:note.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Author: \",note.author]}),/*#__PURE__*/_jsx(\"div\",{className:\"note_body\",children:note.body}),!isDeleting&&/*#__PURE__*/_jsx(Button,{onClick:handleDelete,children:\"Delete Note\"}),isDeleting&&/*#__PURE__*/_jsx(Button,{disabled:true,children:\"Deleting Note...\"})]})]});};export default NoteDetails;","map":{"version":3,"names":["useState","useParams","useNavigate","doc","deleteDoc","firestore","useFetch","Button","auth","jsx","_jsx","jsxs","_jsxs","NoteDetails","_useParams","id","navigate","_useFetch","note","notes","error","isPending","_useState","_useState2","_slicedToArray","isDeleting","setIsDeleting","handleDelete","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","userId","collectionName","noteRef","wrap","_callee$","_context","prev","next","currentUser","uid","concat","console","log","t0","stop","apply","arguments","className","children","title","author","body","onClick","disabled"],"sources":["/Users/mc/Desktop/The_Odin_Project/react/notely/src/Components/NoteDetails.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { doc, deleteDoc } from \"firebase/firestore\";\nimport { firestore } from \"../firebase\";\nimport useFetch from \"../useFetch\";\nimport { Button } from \"react-bootstrap\";\nimport { auth } from \"../firebase\";\n\nconst NoteDetails = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { notes: note, error, isPending } = useFetch(id);\n  const [isDeleting, setIsDeleting] = useState(false);\n\n  const handleDelete = async () => {\n    setIsDeleting(true);\n    try {\n      const user = auth.currentUser;\n      const userId = user.uid;\n      const collectionName = `UserNotes_${userId}`\n      const noteRef = doc(firestore, collectionName, id);\n      await deleteDoc(noteRef);\n\n      console.log(\"Note deleted successfully\");\n      navigate(\"/\"); // Redirect to the home page or the desired route after deleting the note\n    } catch (error) {\n      console.error(\"Error deleting note:\", error);\n      setIsDeleting(false);\n    }\n  };\n\n  return (\n    <div className=\"note-details\">\n      {isPending && <div>Loading ... </div>}\n      {error && <div>{error}</div>}\n      {note && (\n        <article>\n          <h2>{note.title}</h2>\n          <p>Author: {note.author}</p>\n          <div className=\"note_body\">{note.body}</div>\n\n          {/* Delete button */}\n          {!isDeleting && (\n            <Button onClick={handleDelete}>Delete Note</Button>\n          )}\n          {isDeleting && (\n            <Button disabled>Deleting Note...</Button>\n          )}\n        </article>\n      )}\n    </div>\n  );\n};\n\nexport default NoteDetails;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}