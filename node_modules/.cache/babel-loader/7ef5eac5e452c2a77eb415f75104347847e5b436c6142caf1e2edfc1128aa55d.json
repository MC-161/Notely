{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mc/Desktop/The_Odin_Project/react/notely/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import{doc,getDoc,collection,getDocs}from'firebase/firestore';import{firestore,auth}from'./firebase';var useFetch=function useFetch(){var id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'default value';var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isPending=_useState4[0],setIsPending=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];useEffect(function(){var fetchNotes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var user,userId,collectionName,documentRef,docSnapshot,data,notesSnapshot,fetchedNotes;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;user=auth.currentUser;userId=user.uid;collectionName=\"UserNotes_\".concat(userId);// Get the user-specific collection name\nif(!(id!=='default value')){_context.next=12;break;}documentRef=doc(firestore,collectionName,id);_context.next=8;return getDoc(documentRef);case 8:docSnapshot=_context.sent;if(docSnapshot.exists()){data=docSnapshot.data();setNotes(data);}else{console.log('Document not found!');setNotes([]);}_context.next=17;break;case 12:_context.next=14;return getDocs(collection(firestore,collectionName));case 14:notesSnapshot=_context.sent;fetchedNotes=notesSnapshot.docs.map(function(doc){return doc.data();});setNotes(fetchedNotes);case 17:setIsPending(false);setError(null);_context.next=26;break;case 21:_context.prev=21;_context.t0=_context[\"catch\"](0);console.error('Error fetching notes: ',_context.t0);setIsPending(false);setError(_context.t0.message);case 26:case\"end\":return _context.stop();}},_callee,null,[[0,21]]);}));return function fetchNotes(){return _ref.apply(this,arguments);};}();if(auth.currentUser){fetchNotes();}},[id]);return{notes:notes,isPending:isPending,error:error};};export default useFetch;","map":{"version":3,"names":["useState","useEffect","doc","getDoc","collection","getDocs","firestore","auth","useFetch","id","arguments","length","undefined","_useState","_useState2","_slicedToArray","notes","setNotes","_useState3","_useState4","isPending","setIsPending","_useState5","_useState6","error","setError","fetchNotes","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","userId","collectionName","documentRef","docSnapshot","data","notesSnapshot","fetchedNotes","wrap","_callee$","_context","prev","next","currentUser","uid","concat","sent","exists","console","log","docs","map","t0","message","stop","apply"],"sources":["/Users/mc/Desktop/The_Odin_Project/react/notely/src/useFetch.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { doc, getDoc, collection, getDocs } from 'firebase/firestore';\nimport { firestore, auth } from './firebase';\n\nconst useFetch = (id = 'default value') => {\n  const [notes, setNotes] = useState([]);\n  const [isPending, setIsPending] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const fetchNotes = async () => {\n      try {\n        const user = auth.currentUser;\n        const userId = user.uid;\n        const collectionName = `UserNotes_${userId}`; // Get the user-specific collection name\n\n        if (id !== 'default value') {\n          const documentRef = doc(firestore, collectionName, id);\n          const docSnapshot = await getDoc(documentRef);\n\n          if (docSnapshot.exists()) {\n            const data = docSnapshot.data();\n            setNotes(data);\n          } else {\n            console.log('Document not found!');\n            setNotes([]);\n          }\n        } else {\n          const notesSnapshot = await getDocs(collection(firestore, collectionName));\n          const fetchedNotes = notesSnapshot.docs.map((doc) => doc.data());\n          setNotes(fetchedNotes);\n        }\n\n        setIsPending(false);\n        setError(null);\n      } catch (error) {\n        console.error('Error fetching notes: ', error);\n        setIsPending(false);\n        setError(error.message);\n      }\n    };\n\n    if (auth.currentUser) {\n      fetchNotes();\n    }\n  }, [id]);\n\n  return { notes, isPending, error };\n};\n\nexport default useFetch;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}